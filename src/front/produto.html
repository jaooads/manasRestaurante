<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedidos</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header>Manas Restaurante</header>

    <main>

        <button type="button" id="abrirModalProdutoBtn">Criar Produto</button>
    </main>

    <div id="modalProduto" class="modal-pagamento" style="display:none;">
        <div class="modal-conteudo">
            <h3>Novo Produto</h3>
            <input type="text" id="nomeProduto" placeholder="Nome do Produto">
            <input type="number" id="precoProduto" placeholder="PreÃ§o" min="0" step="0.01">
            <button type="button" id="salvarProdutoBtn">Salvar</button>
            <button type="button" id="fecharModalProdutoBtn">Fechar</button>
        </div>
    </div>

    <script src="app.js"></script>

    <script>
        document.getElementById('irCaixaBtn').addEventListener('click', () => {
            window.location.href = 'caixa.html';
        });

        const modal = document.getElementById('modalProduto');
        document.getElementById('abrirModalProdutoBtn').onclick = () => modal.style.display = 'flex';
        document.getElementById('fecharModalProdutoBtn').onclick = () => modal.style.display = 'none';

        document.getElementById('salvarProdutoBtn').onclick = async () => {
            const nome = document.getElementById('nomeProduto').value;
            const preco = document.getElementById('precoProduto').value;

            if (!nome || !preco) return alert('Preencha todos os campos');

            const resp = await fetch('http://localhost:3000/produtos', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ nome, preco })
            });

            const data = await resp.json();
            alert(data.msg);
            if (resp.ok) modal.style.display = 'none';
        };
    </script>

</body>

</html>